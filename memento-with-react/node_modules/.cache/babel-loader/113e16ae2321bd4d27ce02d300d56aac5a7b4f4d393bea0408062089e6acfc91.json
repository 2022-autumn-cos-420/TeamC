{"ast":null,"code":"var _jsxFileName = \"/home/josh/Desktop/COS520/Mem/TeamC/memento-with-react/src/pages/components/Importcard.tsx\";\nimport React, { Component } from 'react';\nimport './Importcard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass ImportCard extends Component {\n  constructor(props) {\n    super(props);\n    this.sleep = ms => new Promise(r => setTimeout(r, ms));\n    this.changeHandler = target => {\n      if (!target.currentTarget.files) {\n        return;\n      }\n      const reader = new FileReader();\n      reader.onload = () => {\n        if (reader.result) {\n          this.readerChange(reader.result);\n        }\n      };\n      // reader.addEventListener('load', (evt) => {\n      //     if (reader.result) {\n      //         this.setState({collection: this.props.parseInputs(reader.result as string, this.state.collection, \"\")});\n      //         console.log(\"ImportCard state length: \" + this.state.collection.length);\n      //         this.props.updateCollection(this.state.collection);\n      //     }\n      // });\n      reader.readAsText(target.currentTarget.files[0]);\n    };\n    this.state = {\n      dragActive: false,\n      collection: this.props.collection\n    };\n  }\n  //Split this into its own function so that the function made by reader.onload can access \"this\" and its state\n  //  There might well be a cleaner way to do it though\n  readerChange(result) {\n    console.log(\"Parsed state length: \" + this.props.parseInputs(result, this.state.collection, \"\").length);\n    const newCollection = this.props.parseInputs(result, this.state.collection, \"\");\n    this.sleep(10000);\n    console.log(\"New state length: \" + newCollection.length);\n    this.setState({\n      collection: newCollection\n    });\n    console.log(\"Updated state length: \" + this.state.collection.length);\n    this.props.updateCollection(this.state.collection);\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        \"data-testid\": \"fileUpload\",\n        type: \"file\",\n        id: \"fileUpload\",\n        onChange: this.changeHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.state.collection.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default ImportCard;","map":{"version":3,"names":["React","Component","ImportCard","constructor","props","sleep","ms","Promise","r","setTimeout","changeHandler","target","currentTarget","files","reader","FileReader","onload","result","readerChange","readAsText","state","dragActive","collection","console","log","parseInputs","length","newCollection","setState","updateCollection","render"],"sources":["/home/josh/Desktop/COS520/Mem/TeamC/memento-with-react/src/pages/components/Importcard.tsx"],"sourcesContent":["import React, {Component, ReactElement, useCallback, useState, ChangeEvent} from 'react';\nimport './Importcard.css';\nimport { Card } from \"../../interfaces/card\";\nimport { equal } from \"assert\";\nimport { exportCards, importCards } from '../../importExport';\n\ninterface Props {\n    collection: Card[],\n    parseInputs: (textInput: string, currentCollection: Card[], deckName: string) => Card[],\n    updateCollection: (childCollection: Card[]) => void\n}\ninterface State {\n    dragActive: boolean,\n    collection: Card[]\n}\nclass ImportCard extends Component<Props, State> {\n    constructor(props: Props) {\n        super(props)\n        this.state = {\n            dragActive: false,\n            collection: this.props.collection\n        }\n    };\n\n    // dragHandler = (event: React.DragEvent) => {\n    //     event.preventDefault();\n    //     event.stopPropagation();\n    //     if (event.type === \"dragenter\" || event.type === \"dragover\") {\n    //         this.setState({dragActive: true});\n    //     } else if (event.type === \"dragleave\") {\n    //         this.setState({dragActive: false});\n    //     }\n    // };\n\n    // dropHandler = (event: React.ChangeEvent) => {\n    //     event.preventDefault();\n    //     event.stopPropagation();\n    //     this.setState({dragActive: false});\n    //     // if (event.dataTransfer.files && event.dataTransfer.files[0]) {\n    //     //     //Handle files event.dataTransfer.files\n    //     //     console.log(\"File drop!\");\n    //     // }\n    // }\n    sleep = (ms: number) => new Promise(r => setTimeout(r, ms));\n\n\n    //Split this into its own function so that the function made by reader.onload can access \"this\" and its state\n    //  There might well be a cleaner way to do it though\n    readerChange(result: string) {\n        console.log(\"Parsed state length: \" + this.props.parseInputs(result, this.state.collection, \"\").length);\n        const newCollection: Card[] = this.props.parseInputs(result, this.state.collection, \"\");\n        this.sleep(10000)\n        console.log(\"New state length: \" + newCollection.length);\n        this.setState({collection: newCollection});\n        console.log(\"Updated state length: \" + this.state.collection.length);\n        this.props.updateCollection(this.state.collection);\n    }\n\n    changeHandler = ( target: React.ChangeEvent<HTMLInputElement> ) => {\n        if (!target.currentTarget.files){\n            return\n        }\n        const reader = new FileReader();\n        reader.onload = () => {\n            if (reader.result) {\n                this.readerChange(reader.result as string)\n            }\n        };\n        // reader.addEventListener('load', (evt) => {\n        //     if (reader.result) {\n        //         this.setState({collection: this.props.parseInputs(reader.result as string, this.state.collection, \"\")});\n        //         console.log(\"ImportCard state length: \" + this.state.collection.length);\n        //         this.props.updateCollection(this.state.collection);\n        //     }\n        // });\n        reader.readAsText(target.currentTarget.files[0]);\n    };\n\n\n    render() {\n        return (\n            <div>\n                {/* <div className=\"ImportCard\">\n                    <form id=\"form-file-upload\" onDragEnter={() => this.dragHandler} onSubmit={() => {}}></form>\n                    <div>Eventually you will drag files here!</div>\n                </div> */}\n                <input data-testid=\"fileUpload\" type=\"file\" id=\"fileUpload\" onChange={this.changeHandler} />                \n                <div>\n                    {this.state.collection.length}\n                </div>\n            </div>\n        )\n    }\n}\nexport default ImportCard;"],"mappings":";AAAA,OAAOA,KAAK,IAAGC,SAAS,QAAyD,OAAO;AACxF,OAAO,kBAAkB;AAAC;AAc1B,MAAMC,UAAU,SAASD,SAAS,CAAe;EAC7CE,WAAW,CAACC,KAAY,EAAE;IACtB,KAAK,CAACA,KAAK,CAAC;IAAA,KA0BhBC,KAAK,GAAIC,EAAU,IAAK,IAAIC,OAAO,CAACC,CAAC,IAAIC,UAAU,CAACD,CAAC,EAAEF,EAAE,CAAC,CAAC;IAAA,KAe3DI,aAAa,GAAKC,MAA2C,IAAM;MAC/D,IAAI,CAACA,MAAM,CAACC,aAAa,CAACC,KAAK,EAAC;QAC5B;MACJ;MACA,MAAMC,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,MAAM,GAAG,MAAM;QAClB,IAAIF,MAAM,CAACG,MAAM,EAAE;UACf,IAAI,CAACC,YAAY,CAACJ,MAAM,CAACG,MAAM,CAAW;QAC9C;MACJ,CAAC;MACD;MACA;MACA;MACA;MACA;MACA;MACA;MACAH,MAAM,CAACK,UAAU,CAACR,MAAM,CAACC,aAAa,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;IACpD,CAAC;IA1DG,IAAI,CAACO,KAAK,GAAG;MACTC,UAAU,EAAE,KAAK;MACjBC,UAAU,EAAE,IAAI,CAAClB,KAAK,CAACkB;IAC3B,CAAC;EACL;EAwBA;EACA;EACAJ,YAAY,CAACD,MAAc,EAAE;IACzBM,OAAO,CAACC,GAAG,CAAC,uBAAuB,GAAG,IAAI,CAACpB,KAAK,CAACqB,WAAW,CAACR,MAAM,EAAE,IAAI,CAACG,KAAK,CAACE,UAAU,EAAE,EAAE,CAAC,CAACI,MAAM,CAAC;IACvG,MAAMC,aAAqB,GAAG,IAAI,CAACvB,KAAK,CAACqB,WAAW,CAACR,MAAM,EAAE,IAAI,CAACG,KAAK,CAACE,UAAU,EAAE,EAAE,CAAC;IACvF,IAAI,CAACjB,KAAK,CAAC,KAAK,CAAC;IACjBkB,OAAO,CAACC,GAAG,CAAC,oBAAoB,GAAGG,aAAa,CAACD,MAAM,CAAC;IACxD,IAAI,CAACE,QAAQ,CAAC;MAACN,UAAU,EAAEK;IAAa,CAAC,CAAC;IAC1CJ,OAAO,CAACC,GAAG,CAAC,wBAAwB,GAAG,IAAI,CAACJ,KAAK,CAACE,UAAU,CAACI,MAAM,CAAC;IACpE,IAAI,CAACtB,KAAK,CAACyB,gBAAgB,CAAC,IAAI,CAACT,KAAK,CAACE,UAAU,CAAC;EACtD;EAuBAQ,MAAM,GAAG;IACL,oBACI;MAAA,wBAKI;QAAO,eAAY,YAAY;QAAC,IAAI,EAAC,MAAM;QAAC,EAAE,EAAC,YAAY;QAAC,QAAQ,EAAE,IAAI,CAACpB;MAAc;QAAA;QAAA;QAAA;MAAA,QAAG,eAC5F;QAAA,UACK,IAAI,CAACU,KAAK,CAACE,UAAU,CAACI;MAAM;QAAA;QAAA;QAAA;MAAA,QAC3B;IAAA;MAAA;MAAA;MAAA;IAAA,QACJ;EAEd;AACJ;AACA,eAAexB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}